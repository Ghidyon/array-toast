<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="css/style.css">
    <title>Array Toasts</title>
</head>

<body>

    <div class="btn blue" id="start">Array Toasts</div>
    <div class="btn blue" id="stop">Stop Toasts</div>
    <div class="container">
        <ul class="hide"></ul>
    </div>

    <script src="js/materialize.min.js"></script>

    <script>
        const button = document.querySelector('#start');
        const stopButton = document.querySelector('#stop');
        const ul = document.querySelector('ul');
        const items = [
            'Airtel',
            'Andela',
            'Apple',
            'Atom',
            'Backend',
            'Bing',
            'Chrome',
            'Computer',
            'Developer',
            'Ebay',
            'Facebook',
            'Frontend',
            'Full-stack',
            'Glo',
            'Google',
            'Instagram',
            'Jumia',
            'Microsoft',
            'MTN',
            'OPay',
            'Paypal',
            'Paystack',
            'Twitter',
            'Vanilla',
            'VS Code',
            'Web',
            'Whatsapp',
            '9Mobile'
        ];

        // Move items as lists to the DOM
        items.forEach(item => {
            const div = document.createElement('div');
            const a = document.createElement('a');
            a.textContent = item;
            const img = document.createElement('img');
            img.setAttribute('src', 'img/fly.svg');
            const badge = document.createElement('sup');
            // li.classList.add('collection-item')
            // li.classList.add('s2');
            // li.classList.add('hoverable');
            div.setAttribute('onclick', `M.toast({html: "${item}", displayLength: 2000, classes: 'rounded'})`);
            // div.classList.add('btn');
            div.appendChild(a);
            div.appendChild(badge);
            div.appendChild(img)
            ul.appendChild(div);
        });

        const lists = document.querySelectorAll('a');
        const divs = document.querySelectorAll('ul div');

        // increase count of clicks
        divs.forEach(div => {
            div.addEventListener('click', e => {
                div.querySelector('sup').innerHTML = Number(div.querySelector('sup').innerHTML) + 1;
            })
        })

        // Display list items randomly on the DOM
        const displayItems = () => {
            const getItem = items[Math.floor(Math.random() * items.length)]; // randomly getting the index position

            // Toast List Items at random
            M.toast({ html: `${getItem}`, displayLength: 2000, classes: 'rounded' });


            lists.forEach(list => {
                if (list.textContent === getItem) {
                    list.nextSibling.innerHTML = Number(list.nextSibling.innerHTML) + 1;
                    list.parentElement.classList.add('z-depth-5', 'border');
                }
                else {
                    list.parentElement.classList.remove('z-depth-5', 'border');
                }
            })
        }

        // display list items on button click

        const buttonToast = () => {
            let startToast;
            button.addEventListener('click', e => {
                button.classList.add('disabled');
                stopButton.classList.remove('disabled');
                ul.classList.remove('hide');
                startToast = setInterval(displayItems, 2000);
            });
            stopButton.addEventListener('click', e => {
                stopButton.classList.add('disabled');
                button.classList.remove('disabled');
                ul.classList.add('hide');
                clearInterval(startToast);
            });
        }

        buttonToast();
        // change displayed list after 5 seconds
    </script>

    <!-- -- Week 3 Presentation
         The entire page should be fine
         Create an array, nothing less than 20 to 30 itmes -- Done
         When you click on the list item, it should be toasted. -- Done
         each of the list you record the number of times it has been toasted. -- Done
         Start button -- Done
         Stop button
    -->
</body>

</html>